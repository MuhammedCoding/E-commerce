"use strict";(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[563],{3563:(oe,c,m)=>{m.r(c),m.d(c,{AuthenticationModule:()=>re});var u=m(6895),p=m(9427),s=m(433),g=m(1597),e=m(1571),_=m(7053),h=m(9643);function v(t,i){1&t&&(e.TgZ(0,"p",24),e._uU(1," Email is Required "),e.qZA())}function Z(t,i){1&t&&(e.TgZ(0,"p",24),e._uU(1," Invalid Email Format "),e.qZA())}function x(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,v,2,0,"p",23),e.YNc(2,Z,2,0,"p",23),e.qZA()),2&t){const o=e.oxw();let r,n;e.xp6(1),e.Q6J("ngIf",null==(r=o.loginForm.get("email"))?null:r.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=o.loginForm.get("email"))?null:n.getError("email"))}}function w(t,i){1&t&&(e.TgZ(0,"p",24),e._uU(1," password is Required "),e.qZA())}function T(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,w,2,0,"p",23),e.qZA()),2&t){const o=e.oxw();let r;e.xp6(1),e.Q6J("ngIf",null==(r=o.loginForm.get("password"))?null:r.getError("required"))}}function C(t,i){1&t&&e._UZ(0,"i",25)}function q(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Login"),e.qZA())}function A(t,i){if(1&t&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.errorMsg," ")}}function b(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Name must have 2 characters at least "),e.qZA())}function I(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Name must have 20 characters at Most "),e.qZA())}function F(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Name is Required"),e.qZA())}function U(t,i){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,b,2,0,"p",16),e.YNc(2,I,2,0,"p",16),e.YNc(3,F,2,0,"p",16),e.qZA()),2&t){const o=e.oxw();let r,n,a;e.xp6(1),e.Q6J("ngIf",null==(r=o.registerForm.get("name"))?null:r.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(n=o.registerForm.get("name"))?null:n.getError("maxlength")),e.xp6(1),e.Q6J("ngIf",null==(a=o.registerForm.get("name"))?null:a.getError("required"))}}function P(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Invalid Email Format"),e.qZA())}function J(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Email is Required"),e.qZA())}function R(t,i){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,P,2,0,"p",16),e.YNc(2,J,2,0,"p",16),e.qZA()),2&t){const o=e.oxw();let r,n;e.xp6(1),e.Q6J("ngIf",null==(r=o.registerForm.get("email"))?null:r.getError("email")),e.xp6(1),e.Q6J("ngIf",null==(n=o.registerForm.get("email"))?null:n.getError("required"))}}function Y(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Password must contain at least one Uppercase letter, one Lowercase letter , minimu length is 8"),e.qZA())}function Q(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"password is Required"),e.qZA())}function k(t,i){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,Y,2,0,"p",16),e.YNc(2,Q,2,0,"p",16),e.qZA()),2&t){const o=e.oxw(2);let r,n;e.xp6(1),e.Q6J("ngIf",null==(r=o.registerForm.get("password"))?null:r.getError("pattern")),e.xp6(1),e.Q6J("ngIf",null==(n=o.registerForm.get("password"))?null:n.getError("required"))}}function y(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Confirm Password is Required "),e.qZA())}function L(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Confirm Password must match with password"),e.qZA())}function M(t,i){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,y,2,0,"p",16),e.YNc(2,L,2,0,"p",16),e.qZA()),2&t){const o=e.oxw(2);let r,n;e.xp6(1),e.Q6J("ngIf",null==(r=o.registerForm.get("rePassword"))?null:r.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=o.registerForm.get("rePassword"))?null:n.getError("passwordMatch"))}}function E(t,i){if(1&t&&(e.TgZ(0,"div")(1,"div",7),e._UZ(2,"input",31),e.TgZ(3,"label",32),e._uU(4,"password:"),e.qZA()(),e.YNc(5,k,3,2,"div",10),e.TgZ(6,"div",7),e._UZ(7,"input",33),e.TgZ(8,"label",34),e._uU(9,"Confirm Password:"),e.qZA()(),e.YNc(10,M,3,2,"div",10),e.qZA()),2&t){const o=e.oxw();let r,n;e.xp6(5),e.Q6J("ngIf",(null==(r=o.registerForm.get("password"))?null:r.errors)&&(null==(r=o.registerForm.get("password"))?null:r.touched)),e.xp6(5),e.Q6J("ngIf",(null==(n=o.registerForm.get("rePassword"))?null:n.errors)&&(null==(n=o.registerForm.get("rePassword"))?null:n.touched))}}function V(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Passport number is Required "),e.qZA())}function S(t,i){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,V,2,0,"p",16),e.qZA()),2&t){const o=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",null==(r=o.registerForm.get("passportNum"))?null:r.getError("required"))}}function O(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Confirm Passport is Required "),e.qZA())}function j(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Confirm Passport must match with Passport"),e.qZA())}function B(t,i){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,O,2,0,"p",16),e.YNc(2,j,2,0,"p",16),e.qZA()),2&t){const o=e.oxw(2);let r,n;e.xp6(1),e.Q6J("ngIf",null==(r=o.registerForm.get("rePassportNum"))?null:r.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=o.registerForm.get("rePassportNum"))?null:n.getError("passwordMatch"))}}function z(t,i){if(1&t&&(e.TgZ(0,"div")(1,"div",7),e._UZ(2,"input",35),e.TgZ(3,"label",36),e._uU(4,"passportNum:"),e.qZA()(),e.YNc(5,S,2,1,"div",10),e.TgZ(6,"div",7),e._UZ(7,"input",37),e.TgZ(8,"label",38),e._uU(9,"Confirm Passport:"),e.qZA()(),e.YNc(10,B,3,2,"div",10),e.qZA()),2&t){const o=e.oxw();let r,n;e.xp6(5),e.Q6J("ngIf",(null==(r=o.registerForm.get("passportNum"))?null:r.errors)&&(null==(r=o.registerForm.get("passportNum"))?null:r.touched)),e.xp6(5),e.Q6J("ngIf",(null==(n=o.registerForm.get("rePassportNum"))?null:n.errors)&&(null==(n=o.registerForm.get("rePassportNum"))?null:n.touched))}}function $(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Please enter egyptian phone number"),e.qZA())}function X(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Phone number is Required"),e.qZA())}function D(t,i){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,$,2,0,"p",16),e.YNc(2,X,2,0,"p",16),e.qZA()),2&t){const o=e.oxw();let r,n;e.xp6(1),e.Q6J("ngIf",null==(r=o.registerForm.get("phone"))?null:r.getError("pattern")),e.xp6(1),e.Q6J("ngIf",null==(n=o.registerForm.get("phone"))?null:n.getError("required"))}}function G(t,i){if(1&t&&(e.TgZ(0,"div",39),e._UZ(1,"input",40),e.TgZ(2,"label",41),e._uU(3),e.qZA()()),2&t){const o=i.index,r=e.oxw();e.xp6(1),e.s9C("id",o),e.Q6J("formControlName",o),e.xp6(1),e.s9C("for",o),e.xp6(1),e.hij(" ",r.permissionsArray[o]," ")}}function H(t,i){1&t&&e._UZ(0,"i",42)}function W(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Register"),e.qZA())}function K(t,i){if(1&t&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.errorMsg," ")}}const ee=[{path:"login",component:(()=>{class t{constructor(o,r,n){this._authService=o,this._router=r,this._tokenService=n,this.loginForm=new s.cw({email:new s.NI("",[s.kI.required,s.kI.email]),password:new s.NI("",[s.kI.required])}),this.isLoading=!1,this.errorMsg=""}handleLogin(o){this.isLoading=!0,o.valid&&this._authService.login(o.value).subscribe({next:r=>{"success"===r.message&&(this._router.navigate(["./pages/home"]),localStorage.setItem("userToken",r.token),this._tokenService.decodeToken()),this.isLoading=!1},error:r=>{this.errorMsg=r.error.message,this.isLoading=!1},complete:()=>{this.isLoading=!1}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(_.$),e.Y36(p.F0),e.Y36(h.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:30,vars:8,consts:[[1,"d-flex"],[1,"center-elem","w-50","login-form","min-vh-100","bg-main-light"],[1,"p-5","w-100","login-form-container"],[1,"header","text-center","mx-auto"],[1,"text-main"],[1,"text-muted","mt-3"],[3,"formGroup","ngSubmit"],[1,"form-floating"],["type","email","formControlName","email",1,"form-control","mb-2"],["for","email"],["class","alert alert-danger p-2",4,"ngIf"],["type","password","formControlName","password","id","password",1,"form-control","mb-2"],["for","password"],["type","submit",1,"btn","bg-main","text-white",3,"disabled"],["class","fa-solid fa-spinner fa-spin",4,"ngIf"],[4,"ngIf"],[1,"center-elem","register"],[1,"d-inline-block"],["routerLink","/authentication/register",1,"btn","rounded-2","btn-register","ms-2"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"image-cover","overflow-hidden","w-50"],["src","../../../../../assets/images/shopping-cart-with-bag-min.jpg","alt","shopping-img",1,"w-100","vh-100"],[1,"alert","alert-danger","p-2"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"alert","alert-danger","mt-2"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e._uU(5," E-Commerce Shopping Application "),e.qZA(),e.TgZ(6,"p",5),e._uU(7,"Sign in and discover our awesome products with offers ! "),e.qZA()(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return r.handleLogin(r.loginForm)}),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"Email"),e.qZA()(),e.YNc(13,x,3,2,"div",10),e.TgZ(14,"div",7),e._UZ(15,"input",11),e.TgZ(16,"label",12),e._uU(17,"Password"),e.qZA()(),e.YNc(18,T,2,1,"div",10),e.TgZ(19,"button",13),e.YNc(20,C,1,0,"i",14),e.YNc(21,q,2,0,"span",15),e.qZA()(),e.TgZ(22,"div",16)(23,"span",17),e._uU(24,"Don't have an account? "),e.TgZ(25,"a",18),e._uU(26,"Sign Up"),e.qZA()()(),e.YNc(27,A,2,1,"div",19),e.qZA()(),e.TgZ(28,"div",20),e._UZ(29,"img",21),e.qZA()()),2&o){let n,a;e.Q6J("@fadeIn",void 0),e.xp6(8),e.Q6J("formGroup",r.loginForm),e.xp6(5),e.Q6J("ngIf",(null==(n=r.loginForm.get("email"))?null:n.errors)&&(null==(n=r.loginForm.get("email"))?null:n.touched)),e.xp6(5),e.Q6J("ngIf",(null==(a=r.loginForm.get("password"))?null:a.errors)&&(null==(a=r.loginForm.get("password"))?null:a.touched)),e.xp6(1),e.Q6J("disabled",r.loginForm.invalid),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(1),e.Q6J("ngIf",!r.isLoading),e.xp6(6),e.Q6J("ngIf",r.errorMsg)}},dependencies:[u.O5,p.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".btn-register[_ngcontent-%COMP%]{border:1px solid var(--main-color);color:var(--main-color);transition:all .4s}.btn-register[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--main-color)}@media (max-width: 992px){.login-form[_ngcontent-%COMP%]{width:100%!important}.image-cover[_ngcontent-%COMP%]{display:none}}"],data:{animation:[g.BX,g.SE,g.Zc]}}),t})()},{path:"register",component:(()=>{class t{constructor(o,r,n){this._authSerive=o,this._router=r,this.formBuilder=n,this.isLoading=!1,this.errorMsg="",this.registerForm=new s.cw({}),this.permissionsArray=["Show products","Add to Cart","Checkout via credit card","Remove Product from Database","Add product to Database","Update product"],this.registerForm=n.group({name:[null,[s.kI.required,s.kI.minLength(2),s.kI.maxLength(20)]],email:[null,[s.kI.required,s.kI.email]],password:[null,[s.kI.pattern(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/)]],rePassword:[null,[s.kI.pattern(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/)]],phone:[null,[s.kI.required,s.kI.pattern(/^01[0125][0-9]{8}$/)]],usePassword:[!0],passportNum:[null],rePassportNum:[null],permissions:this.formBuilder.array([])},{validators:[this.passwordMatchValidator("password","rePassword"),this.passwordMatchValidator("passportNum","rePassportNum")]})}ngOnInit(){console.log(this.permissions),this.permissionsArray.forEach(o=>{const r=this.formBuilder.control(!1);this.permissions.push(r)}),this.registerForm.get("usePassword")?.valueChanges.subscribe(o=>{this.handleRequiredControls(o)})}handleRegister(o){console.log(o.value),o.valid&&(this.isLoading=!0,this._authSerive.registerUser(o.value).subscribe({next:r=>{"success"===r.message&&this._router.navigate(["./authentication/login"]),this.isLoading=!1},error:r=>{console.log(r),this.isLoading=!1,this.errorMsg=r.error.message},complete:()=>{this.isLoading=!1}}))}passwordMatchValidator(o,r){return n=>{const l=n.controls[r];n.controls[o].value!==l.value&&l.setErrors({passwordMatch:"Confirm password must match with password"})}}get permissions(){return this.registerForm.controls.permissions}handleRequiredControls(o){const r=this.registerForm.get("password"),n=this.registerForm.get("rePassword"),a=this.registerForm.get("passportNum"),l=this.registerForm.get("rePassportNum");o?(r?.addValidators([s.kI.required]),n?.setValidators([s.kI.required]),a?.setValue(null),l?.setValue(null),a?.removeValidators([s.kI.required]),l?.removeValidators([s.kI.required])):(r?.removeValidators([s.kI.required]),n?.removeValidators([s.kI.required]),r?.setValue(null),n?.setValue(null),a?.addValidators([s.kI.required]),l?.setValidators([s.kI.required])),r?.updateValueAndValidity(),n?.updateValueAndValidity(),a?.updateValueAndValidity(),l?.updateValueAndValidity()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(_.$),e.Y36(p.F0),e.Y36(s.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:45,vars:12,consts:[[1,"d-flex"],[1,"center-elem","w-50","register-form","min-vh-100","bg-main-light"],[1,"p-5","w-100","login-form-container"],[1,"header","text-center","mx-auto"],[1,"text-main"],[1,"text-muted","mt-3"],[3,"formGroup","ngSubmit"],[1,"form-floating"],["type","text","formControlName","name","id","name",1,"form-control","mb-2"],["for","name"],["class","alert alert-danger p-2",4,"ngIf"],["type","email","formControlName","email","id","email",1,"form-control","mb-2"],["for","email"],[1,"form-check","form-switch","text-start"],["type","checkbox","formControlName","usePassword","id","usePassword",1,"form-check-input"],["for","usePassword",1,"form-check-label"],[4,"ngIf"],["type","tel","formControlName","phone","id","phone",1,"form-control","mb-2"],["for","phone"],["formArrayName","permissions",1,"text-start","my-3"],[1,"d-block","mb-2","text-main"],["class","form-check",4,"ngFor","ngForOf"],["type","submit",1,"btn","bg-main","text-white","d-block",3,"disabled"],["class","fa-solid fa-spinner fa-spin",4,"ngIf"],[1,"center-elem","login"],[1,"d-inline-block"],["routerLink","/authentication/login",1,"btn","rounded-2","btn-login","ms-2"],["class","alert alert-danger p-2 mt-2",4,"ngIf"],[1,"image-cover","overflow-hidden","w-50"],["src","../../../../../assets/images/slate-small-shopping-cart-min.jpg","alt","shopping-img",1,"w-100"],[1,"alert","alert-danger","p-2"],["type","password","formControlName","password","id","password",1,"form-control","mb-2"],["for","password"],["type","password","formControlName","rePassword","id","rePassword",1,"form-control","mb-2"],["for","rePassword"],["type","password","formControlName","passportNum","id","passport",1,"form-control","mb-2"],["for","passport"],["type","password","formControlName","rePassportNum","id","rePassportNum",1,"form-control","mb-2"],["for","rePassportNum"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"formControlName","id"],[1,"form-check-label",3,"for"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"alert","alert-danger","p-2","mt-2"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e._uU(5," E-Commerce Shopping Application "),e.qZA(),e.TgZ(6,"p",5),e._uU(7,"Join us now and be a part of our wonderful story discover our awesome products with offers! "),e.qZA(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return r.handleRegister(r.registerForm)}),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"name:"),e.qZA()(),e.YNc(13,U,4,3,"div",10),e.TgZ(14,"div",7),e._UZ(15,"input",11),e.TgZ(16,"label",12),e._uU(17,"email:"),e.qZA()(),e.YNc(18,R,3,2,"div",10),e.TgZ(19,"div",13),e._UZ(20,"input",14),e.TgZ(21,"label",15),e._uU(22,"Use Password"),e.qZA()(),e.YNc(23,E,11,2,"div",16),e.YNc(24,z,11,2,"div",16),e.TgZ(25,"div",7),e._UZ(26,"input",17),e.TgZ(27,"label",18),e._uU(28,"phone:"),e.qZA()(),e.YNc(29,D,3,2,"div",10),e.TgZ(30,"div",19)(31,"span",20),e._uU(32,"Permissions:"),e.qZA(),e.YNc(33,G,4,4,"div",21),e.qZA(),e.TgZ(34,"button",22),e.YNc(35,H,1,0,"i",23),e.YNc(36,W,2,0,"span",16),e.qZA()(),e.TgZ(37,"div",24)(38,"span",25),e._uU(39,"Already have an account? "),e.TgZ(40,"a",26),e._uU(41,"Login"),e.qZA()()(),e.YNc(42,K,2,1,"div",27),e.qZA()()(),e.TgZ(43,"div",28),e._UZ(44,"img",29),e.qZA()()),2&o){let n,a,l,f,d;e.Q6J("@fadeIn",void 0),e.xp6(8),e.Q6J("formGroup",r.registerForm),e.xp6(5),e.Q6J("ngIf",(null==(n=r.registerForm.get("name"))?null:n.errors)&&(null==(n=r.registerForm.get("name"))?null:n.touched)),e.xp6(5),e.Q6J("ngIf",(null==(a=r.registerForm.get("email"))?null:a.errors)&&(null==(a=r.registerForm.get("email"))?null:a.touched)),e.xp6(5),e.Q6J("ngIf",null==(l=r.registerForm.get("usePassword"))?null:l.value),e.xp6(1),e.Q6J("ngIf",!(null!=(f=r.registerForm.get("usePassword"))&&f.value)),e.xp6(5),e.Q6J("ngIf",(null==(d=r.registerForm.get("phone"))?null:d.errors)&&(null==(d=r.registerForm.get("phone"))?null:d.touched)),e.xp6(4),e.Q6J("ngForOf",r.permissions.controls),e.xp6(1),e.Q6J("disabled",r.registerForm.invalid),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(1),e.Q6J("ngIf",!r.isLoading),e.xp6(6),e.Q6J("ngIf",r.errorMsg)}},dependencies:[u.sg,u.O5,p.rH,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,s.CE],styles:["form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--main-color)!important;border:1px!important;box-shadow:0 0 0 1px #fc8429ca}.btn-login[_ngcontent-%COMP%]{border:1px solid var(--main-color);color:var(--main-color);transition:all .4s}.btn-login[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--main-color)}@media (max-width: 992px){.register-form[_ngcontent-%COMP%]{width:100%!important}.image-cover[_ngcontent-%COMP%]{display:none}}"],data:{animation:[g.BX,g.SE,g.Zc]}}),t})()}];let te=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(ee),p.Bz]}),t})(),re=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,te]}),t})()}}]);